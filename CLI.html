<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Command Line Interface &#8212; esrf_id10_surf  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=2bf1fcf8" />
    
    <script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=fd6eb6e6"></script>
    <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Grazing Incidence X-ray Scattering" href="GIXS.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GIXS.html" title="Grazing Incidence X-ray Scattering"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">esrf_id10_surf  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Command Line Interface</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Link to this heading">ÔÉÅ</a></h1>
<p>Command Line Interface (CLI) provides a convenient wrapper for batch processing of the XRR and GID data.
This interface reads a configuration YAML file with a following structure:</p>
<p>Instrument definition:</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="ss">instrument</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;id10-surf&#39;</span>
</pre></div>
</div>
<p>Next, visit definition for traceability and metadata storage in ORSO format:</p>
<div class="highlight-yml notranslate"><div class="highlight"><pre><span></span>visit:
  local_contact: &quot;John Doe&quot;
  user: &#39;Big Prof&#39;
  user_affiliation: &#39;Harvard&#39;
  visit id: &#39;sc7777&#39;
  date: 2025-12-26
  saving: &#39;default&#39;     # can be either /path/to/the/dir or cwd. default is PROCESSED_DATA if path contains RAW_DATA, cwd otherwise
</pre></div>
</div>
<p>Next, we define an XRR setup by providing reduction parameters:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">setup_xrr</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PX0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">401</span>
<span class="w">  </span><span class="nt">PY0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">  </span><span class="nt">dPX</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<span class="w">  </span><span class="nt">dPY</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">bckg_gap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">monitor_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ionch2&#39;</span>
<span class="w">  </span><span class="nt">alpha_i_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;mu&#39;</span>
<span class="w">  </span><span class="nt">beam_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="w">  </span><span class="nt">sample_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">17</span>
</pre></div>
</div>
<p>Similar for GID reduction parameters:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">setup_gid</span><span class="p">:</span>
<span class="w">  </span><span class="nt">PX0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<span class="w">  </span><span class="nt">PPD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">198.5</span>
<span class="w">  </span><span class="nt">mythen_gap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">90</span>
<span class="w">  </span><span class="nt">alpha_i_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;mu&#39;</span>
<span class="w">  </span><span class="nt">monitor_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ionch2&#39;</span>
<span class="w">  </span><span class="nt">I0</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2e12</span>
</pre></div>
</div>
<p>Next we define files and scans for processing XRR. It is possible to define multiple files</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">xrr</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/data/visitor/ls3582/id10-surf/20251120/RAW_DATA/sample/sample_dataset/sample_dataset.h5&#39;</span>
<span class="w">    </span><span class="nt">scans</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">zgH</span><span class="p">:</span><span class="w"> </span><span class="nv">7</span><span class="p p-Indicator">,</span><span class="nt"> refl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8,9&quot;</span><span class="p p-Indicator">}</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">zgH</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="p p-Indicator">,</span><span class="nt"> refl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;15,16&quot;</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/data/visitor/ls3582/id10-surf/20251120/RAW_DATA/lipids/lipids_40C/lipids_40C.h5&#39;</span>
<span class="w">    </span><span class="nt">scans</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">zgH</span><span class="p">:</span><span class="w"> </span><span class="nv">5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">refl = &quot;6</span><span class="p p-Indicator">,</span><span class="nv">7&quot;</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>Similar definition is for GID processing. Note, that several scans on one line will stitch them together and those should not overlap.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">gid</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/data/ls3582/id10-surf/20251120/RAW_DATA/lipids/lipids_20C/lipids_20C.h5&#39;</span>
<span class="w">    </span><span class="nt">scans</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">11</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">19, 20</span>
</pre></div>
</div>
<p>To call CLI simply run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3<span class="w"> </span>cli.py<span class="w"> </span>processing_config.yaml
</pre></div>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="GIXS.html"
                          title="previous chapter">Grazing Incidence X-ray Scattering</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/CLI.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GIXS.html" title="Grazing Incidence X-ray Scattering"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">esrf_id10_surf  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Command Line Interface</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Egor A. Bersenev.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    </div>
  </body>
</html>